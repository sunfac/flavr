Here is your detailed, revised functional overview of the Flavr app, aligned with your latest structure and requirements â€” including:

Three distinct modes with custom quizzes

Two-stage GPT prompt pipelines for Shopping and Fridge

A quiz-driven Chef Assist Mode

A shared ChatBot layer

Flavr+ usage gating

Stripe integration

Modular component and prompt architecture

ğŸ§  Flavr Functional Overview (Final Revised Architecture)
Flavr is a mobile-first, AI-powered recipe generation app designed to create emotionally intelligent meals across three distinct use modes. It uses structured inputs, modular GPT prompt pipelines, and a shared conversational ChatBot to deliver personalized cooking experiences.

ğŸ”§ CORE TECHNOLOGY
Frontend: React + TypeScript

State/Storage: Replit DB

AI: OpenAI GPT-4/3.5 + Stable Diffusion (optional)

Monetization: Stripe â†’ Flavr+ upgrade

Routing: Vite + React Router

Branding: Custom landing, header/footer, user menu, and settings panel

ğŸ” GLOBAL FEATURES
ğŸ§¾ Flavr+ Usage Gating
5 free GPT-generated recipes/month (Prompt 2)

5 Stable Diffusion images/month

Usage tracked via Replit DB (user:<id>:recipesThisMonth)

Stripe upgrades enable unlimited usage

ğŸ’¬ ChatBot (Available in All Modes)
Persistent, chef-like conversational assistant

Users can:

Ask for substitutions

Clarify instructions

Request modifications

Does not interfere with Prompt 1/Prompt 2 pipeline

Powered by separate GPT chat API call (chatPrompt.ts)

ğŸ§­ MODE OVERVIEW
ğŸ›’ Shopping Mode
Input Quiz:

Custom flow collecting mood, cuisine, time, budget, diet, equipment, ambition

Prompt 1 (shoppingPrompt1.ts):

Generates 3â€“6 swipeable recipe card ideas

Prompt 2 (shoppingPrompt2.ts):

Triggered on selection

Returns structured full recipe (title, servings, time, ingredients, steps)

Also shows: Shopping list, image (if allowed)

ğŸ¥¦ Fridge to Fork Mode
Input Quiz:

Tailored form for available ingredients, mood, equipment, time, ambition

Prompt 1 (fridgePrompt1.ts):

GPT generates dish ideas using only the available ingredients

Swipeable card preview output

Prompt 2 (fridgePrompt2.ts):

Full recipe for selected card

No shopping list (user already has ingredients)

ğŸ‘¨â€ğŸ³ Chef Assist Mode
Input Quiz:

Collects detailed intent (e.g., â€œI want to cook a romantic Italian dinner in 30 minutes using my air fryerâ€)

Prompt 2 Only (chefPrompt2.ts):

Uses structured intent input to generate a full recipe

No Prompt 1 preview step

Optionally includes:

Serving tips

Mood or storytelling enhancements

GPT response treated like a full bespoke chef consultation

ğŸ—ƒï¸ FILE STRUCTURE
css
Copy
Edit
src/
â”œâ”€â”€ main.tsx
â”œâ”€â”€ App.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”œâ”€â”€ UserMenu.tsx
â”‚   â”œâ”€â”€ SettingsPanel.tsx
â”‚   â”œâ”€â”€ InputQuizShopping.tsx
â”‚   â”œâ”€â”€ InputQuizFridge.tsx
â”‚   â”œâ”€â”€ InputQuizChef.tsx
â”‚   â”œâ”€â”€ RecipeCard.tsx
â”‚   â”œâ”€â”€ ShoppingList.tsx
â”‚   â”œâ”€â”€ ChatBot.tsx
â”‚   â””â”€â”€ Loading.tsx
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ LandingPage.tsx
â”‚   â”œâ”€â”€ ShoppingMode.tsx
â”‚   â”œâ”€â”€ FridgeMode.tsx
â”‚   â”œâ”€â”€ ChefAssistMode.tsx
â”‚   â””â”€â”€ SettingsPage.tsx
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ shoppingPrompt1.ts
â”‚   â”œâ”€â”€ shoppingPrompt2.ts
â”‚   â”œâ”€â”€ fridgePrompt1.ts
â”‚   â”œâ”€â”€ fridgePrompt2.ts
â”‚   â”œâ”€â”€ chefPrompt2.ts
â”‚   â””â”€â”€ chatPrompt.ts
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api.ts              â† GPT + SD integration
â”‚   â”œâ”€â”€ db.ts               â† Replit DB logic
â”‚   â””â”€â”€ stripe.ts           â† Stripe checkout + plan check
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useFlavrGate.ts     â† recipe/image usage limits
ğŸ§¼ FINAL REQUIREMENTS FOR IMPLEMENTATION
One version of each component (no duplicates)

Zero broken routes or runtime errors

Clean loading logic (one Loading.tsx)

Recipes stored per user

Modular prompt system: 1 mode = 1 or 2 prompts

Shared ChatBot available in all modes

Stripe and usage gating tested

